<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="common/common_header :: common_header(~{::title},~{::link},~{})">
<meta charset="UTF-8">
<link rel="stylesheet" th:href="@{'/static/staticres/test/jquery-ui.css'}" />
<link rel="stylesheet" th:href="@{'/static/staticres/test/test.css'}" />
<title></title>
<style type="text/css">
.table-query td {
	padding: 2px;
}
</style>
</head>
<body style="overflow-x: hidden; overflow-y: hidden;">
	<form action="saveArea?flag='area'" name="userForm"
	id="userForm" method="post">
	<div id="zhongxin">
			<table id="table_report"
				class="table table-striped table-bordered table-hover">
				<tr>
					<td style="width: 110px; text-align: right;"><font color="red">*
					</font>区域名称:</td>
					<td><input type="text" class="form-control input-sm" id="name"
						name="name" value="" placeholder="这里输入区域名称"
						title="区域名称"></td>

					<td style="width: 105px; text-align: right;">备注信息:</td>
					<td><input type="text" class="form-control input-sm"
						id="comments" name="comments" value=""
						placeholder="这里输入备注信息" title="备注信息"></td>
				</tr>
				<tr>
					<td style="width: 100px; text-align: right;"><font color="red">
							* </font>定位维度:</td>
					<td><select style="width: 270px;" id="locationDimensionality"
						name="locationDimensionality" class="form-control select2">
							<option>一维</option>
							<option>二维</option>
							<option>三维</option>
					</select></td>

					<td style="width: 100px; text-align: right;"><font color="red">
							* </font>时钟源</td>
					<td><select style="width: 270px;" id="clockSourceId"
						 th:if="${clockList} != null" 
						name="clockSourceId" class="form-control select2">
							
							<option th:if="${clockList} == null">无</option>
							<option th:each="clock:${clockList}" th:value="${clock.clockName}" th:text="${clock.clockName}"></option>
					</select></td>
				</tr>
				<tr>

					<td style="width: 100px; text-align: right;"><font color="red">
							* </font>触发方式:</td>
					<td colspan="3"><select style="width: 270px;" id="locationTrigger"
						name="locationTrigger" class="form-control select2">
							<option>消息数量达到最小要求, 触发计算</option>
							<option>下一条消息到达, 触发计算(如果消息数量不够,不触发)</option>
					</select></td>
					
				</tr>
				<tr>
					<td style="width: 100px; text-align: right;"><font color="red">
							* </font>Z坐标缺省高度:</td>
					<td><input type="text" class="form-control input-sm"
						id="defaultZ_Value" name="defaultZ_Value"
						value="" placeholder="这里输入Z坐标缺省值"
						title="Z坐标缺省值"></td>
					<td style="width: 100px; text-align: right;"></td>
					<td style="text-align: left;">
						<div class="checkbox icheck">
							<label><input id="useAverageFilter"
								name="useAverageFilter" type="checkbox"> 使用平均值滤波器</label>
						</div>
					</td>
				</tr>
				<tr>
					<td style="width: 100px; text-align: right;"><font color="red">
							* </font>平均滤波时长(毫秒):</td>
					<td><input type="text" class="form-control input-sm"
						id="averageFilterSampleTimeLength"
						name="averageFilterSampleTimeLength"
						value=""
						placeholder="输入平均值滤波器时长单位是毫秒" title="输入平均值滤波器时长单位是毫秒"></td>
					<td style="width: 100px; text-align: right;"></td>
					<td style="text-align: left;">
						<div class="checkbox icheck">

							<label><input id="discardPointsOfOutOfArea"
								name="discardPointsOfOutOfArea" type="checkbox">
								是否启用边界限制</label>
						</div>
					</td>
				</tr>
				<tr>
					<td style="width: 100px; text-align: right;"><font color="red">
							* </font>卡尔曼:</td>
					<td><input type="text" class="form-control input-sm"
						id=kalmanFilterLevel name="kalmanFilterLevel"
						value="" placeholder="这里输入卡尔曼滤波器"
						title="卡尔曼滤波器"></td>
					<td style="width: 100px; text-align: right;"></td>
					<td style="text-align: left;">
						<div class="checkbox icheck">
							<label><input id="useKalmanFilter" name="useKalmanFilter"
								type="checkbox"> 使用卡尔曼滤波器</label>
						</div>
					</td>
				</tr>
				<tr>
					<td style="width: 100px; text-align: right;"><font color="red">
							* </font>定位基站:</td>
					<td style="text-align: left;">
						<div style="width:256px">
							<div style="float: left;width:287px;height:90px;border:1px solid #ccc">
								<div id="addAnchorTest" style="width:287px;height:90px;color:white;overflow-y:scroll; border: 1px solid #ccc">
									
								</div>
							</div>
						</div>
					</td>
					<td>
						<div class="btn-group" role="group">
							<a  class="btn btn-default" onclick="selectAnchor()">选择...</a>
						</div>
					</td>
					<!-- <td style="width: 100px; text-align: right;"></td> -->
					<td style="text-align: left;">
						<div class="checkbox icheck">
							<label><input id="active" name="active" type="checkbox"> 是否激活(激活才会定位)</label>
						</div>
					</td>
				</tr>
				

			</table>
		</div>
		<div id="zhongxin2" class="center" style="display: none">
			<br /> <br /> <br /> <br /> <br /> <img
				th:src="@{'static/staticres/images/jiazai.gif'}" /><br />
			<h4 class="lighter block green">提交中...</h4>
		</div>
	</form>




<script th:src="@{'/static/staticres/test/jquery.js'}"></script>
<!--引入弹窗组件start-->
<script th:src="@{'/static/staticres/plugins/attention/zDialog/zDrag.js'}"></script>
<script th:src="@{'/static/staticres/plugins/attention/zDialog/zDialog.js'}"></script>

<script type="text/javascript">
//选择基站
function selectAnchor(){
	var diag = new Dialog();
	diag.Width = "50%";
	diag.Height= "60%";
	diag.Title = "调试基站选择";
	diag.URL="selectAnchor";
	 diag.OKEvent = function(){
		  	var receivestr=diag.innerFrame.contentWindow.getAnchorStrs();
	 		var showName=receivestr.split(',');
	 		var flag = 1;
	 		var anchorName = getDebugAnchorName();
	 		console.info("t:"+showName);
	 		if(showName[0]=='')
	 			{
					Dialog.alert("提示：你没有选择任何内容,若想取消选择，请点击【取消】按钮");
	 			}
	 		else{
	 				for(var i =0;i < showName.length;i++){
	 					var id= showName[i];
	 					var anchorArray = anchorName.split(",");
	 					for(var j =0 ; j < anchorArray.length ;j++){
	 						if(id == anchorArray[j]){
	 							Dialog.alert(id+"--已添加");
	 							flag = 0;
	 							break;
	 						}
	 					}
	 					if(flag == 1){
		 					$("#addAnchorTest").append('<div style="float: left;background:#3c8dbc;border:1px solid #aaa;margin-left:2px;padding:1px 10px;border-radius:4px;" id='
		 					+id+' value="'+id+'"><span style="cursor:pointer;font-weight:bold;margin-right:5px;color: rgba(255, 255, 255, 0.7);" onclick="delebase(this)">×</span>'
		 					+showName[i]+'</div>');
	 					}else{
	 						break;
	 					}
	 				}
	 				
	 				if(flag == 1){
		 				$("#debugAnchorList").val(anchorName);
	 				}
	 				
	 				diag.close();
	 			}
			};
	 diag.CancelEvent = function(){ //关闭事件
				diag.close();
			 };
	diag.show();
}

//获取调试基站的名称
function getDebugAnchorName(){
	var myDiv = document.getElementById("addAnchorTest");
	var div_s = myDiv.getElementsByTagName("div");
	var anchorName = '';
	for(var i=0;i<div_s.length;i++){
		anchorName += div_s.item(i).innerHTML.substring(div_s.item(i).innerHTML.length-9,div_s.item(i).innerHTML.length)+",";
	}
	return anchorName;
}
//删除元素
function delebase(divid){
	$(divid).parent().remove();
}
</script>
</body>
</html>